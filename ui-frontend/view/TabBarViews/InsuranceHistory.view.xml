<mvc:View
        controllerName="personal.account.controller.TabBarControllers.InsuranceHistory"
        xmlns="sap.m"
        xmlns:core="sap.ui.core"
        xmlns:mvc="sap.ui.core.mvc"
        xmlns:form="sap.ui.layout.form"
        xmlns:layout="sap.ui.layout">
    <Page
            showHeader="false"
            enableScrolling="true">
        <layout:Grid
                width="100%">
            <Label
                    class="sapUiSmallMarginTop"
                    text="{i18n>dateRange}">
                <layoutData>
                    <layout:GridData
                            span="L3 M4 S4"
                            indent="L1 M1 S1"/>
                </layoutData>
            </Label>
            <DateRangeSelection
                    placeholder="{i18n>dateRangePlaceholder}"
                    change="onDateRangeChange">
                <layoutData>
                    <layout:GridData
                            span="L4 M5 S4"
                            indent="L0 M0 S0"/>
                </layoutData>
            </DateRangeSelection>
            <ToggleButton
                    pressed="{techModel>/tech/insuranceHistoryTab/isShowHideButtonPressed}"
                    width="100%"
                    text="{
                            path:'techModel>/tech/insuranceHistoryTab/isShowHideButtonPressed',
                            formatter:'.formatter.formatButtonName'
                          }"
                    enabled="{techModel>/tech/insuranceHistoryTab/isShowHideButtonEnabled}"
            >
                <layoutData>
                    <layout:GridData
                            span="L2 M3 S7"
                            indent="L0 M0 S0"/>
                </layoutData>
            </ToggleButton>
            <Button
                    width="100%"
                    press="onPrint"
                    icon="sap-icon://print">
                <layoutData>
                    <layout:GridData
                            span="L2 M2 S2"/>
                </layoutData>
            </Button>
        </layout:Grid>
        <!--дополнительное поле информации при нажатой кнопке-->
        <form:Form
                visible="{techModel>/tech/insuranceHistoryTab/isShowHideButtonPressed}"
                editable="true">
            <form:formContainers>
                <form:FormContainer>
                    <form:FormElement>
                        <Label
                                text="{= ${i18n>insuranceHistory.exp.balance.income} + ' ' + ${techModel>/tech/insuranceHistoryTab/dateFrom} }"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L3 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/insuranceHistoryTab/AmountIncome'},{path:'i18n>currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                            <layoutData>
                                <layout:GridData
                                        span="L6 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </ObjectNumber>

                    </form:FormElement>
                    <form:FormElement>
                        <Label
                                text="{= ${i18n>insuranceHistory.exp.balance.outcome} + ' ' +${techModel>/tech/insuranceHistoryTab/dateTo} }"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L3 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/insuranceHistoryTab/AmountOutgoing'},{path:'i18n>currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                            <layoutData>
                                <layout:GridData
                                        span="L6 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </ObjectNumber>
                    </form:FormElement>
                    <form:FormElement>
                        <Label
                                text="{i18n>insuranceHistory.exp.balance.total}"
                                class="label-margin-top">
                            <layoutData>
                                <layout:GridData
                                        span="L4 M3 S7"
                                        indent="L1 M0 S0"/>
                            </layoutData>
                        </Label>
                        <ObjectNumber
                                number="{
                            parts:[{path:'techModel>/tech/insuranceHistoryTab/AmountDifference'},{path:'i18n>currencyCode'}],
						    type: 'sap.ui.model.type.Currency'
					    }">
                        <layoutData>
                            <layout:GridData
                                    span="L2 M3 S7"/>
                        </layoutData>
                        </ObjectNumber>
                    </form:FormElement>
                </form:FormContainer>
            </form:formContainers>
            <form:layout>
                <form:ResponsiveGridLayout
                        labelSpanXL="3"
                        labelSpanL="3"
                        labelSpanM="4"
                        labelSpanS="3"
                        columnsL="1"
                        columnsM="1"
                        columnsS="1"/>
            </form:layout>
        </form:Form>
        <!--Конец доп поля-->

        <ScrollContainer vertical="false" horizontal="true">
            <Table
                    showNoData="false">
                <columns>
                    <Column
                            width="20%"
                            hAlign="Center">
                        <Text text="{i18n>insuranceHistory.tab.date}"/>
                    </Column>
                    <Column
                            width="30%"
                            hAlign="Center">
                        <Text text="{i18n>insuranceHistory.tab.operation}"/>
                    </Column>
                    <Column
                            width="10%"
                            hAlign="Center">
                        <Text text="{i18n>insuranceHistory.tab.status}"/>
                    </Column>
                    <Column
                            width="30%"
                            hAlign="Center">
                        <Text text="{i18n>insuranceHistory.tab.contrAgent}"/>
                    </Column>
                    <Column
                            width="10%"
                            hAlign="Center">
                        <Text text="{i18n>insuranceHistory.tab.check}"/>
                    </Column>
                </columns>
            </Table>
            <ScrollContainer vertical="true" horizontal="false">

                <Table
                        id="table-insurance-history"
                        items="{
                            path: 'operationsModel>/',
                            sorter: {
                                path: 'timestamp',
                                descending: true
                            }
                        }"
                >
                    <columns>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                        <Column
                                hAlign="Center">
                        </Column>
                    </columns>
                    <items>
                        <CustomListItem>
                            <Panel
                                    class="tableReport"
                                    expandable="true"
                                    expand="false"
                                    width="auto">
                                <headerToolbar>
                                    <Toolbar
                                            width="100%">
                                        <content>
                                            <Text
                                                    textAlign="Left"
                                                    width="20%"
                                                    text="{
                                                        path: 'operationsModel>timestamp',
                                                        formatter:'.formatter.formatDateForTable'}"/>
                                            <Text
                                                    width="30%"
                                                    textAlign="Center"
                                                    text="{operationsModel>operationType}"/>
                                            <core:Icon
                                                    width="10%"
                                                    src="sap-icon://overlay"
                                                    color="{
                                                        path: 'operationsModel>pending',
                                                        formatter: '.formatter.formatTableItemPending'
                                                    }"
                                            />
                                            <Text
                                                    width="30%"
                                                    textAlign="Center"
                                                    text="{operationsModel>contractor}"/>
                                        </content>
                                    </Toolbar>
                                </headerToolbar>
                                <content>
                                    <layout:VerticalLayout
                                        class="verticalLayout-margin_left">
                                        <layout:HorizontalLayout>
                                            <Label text="{i18n>insuranceHistory.tab.exp.transactionId}">
                                            </Label>
                                            <Link text="{operationsModel>transactionHash}" press="onLinkPress">
                                            </Link>
                                        </layout:HorizontalLayout>

                                        <layout:HorizontalLayout>
                                            <Label text="{i18n>insuranceHistory.tab.exp.sender}">
                                            </Label>
                                            <Text text="{operationsModel>transactionFrom}">
                                            </Text>
                                        </layout:HorizontalLayout>

                                        <layout:HorizontalLayout width="100%">
                                            <Label text="{i18n>insuranceHistory.tab.exp.confirmationsNumber}">
                                            </Label>
                                            <Text text="{
                                                            path: 'techModel>pending',
                                                            formatter: '.formatter.formatNumberOfConfirmations'
                                                        }"
                                            />
                                        </layout:HorizontalLayout>
                                    </layout:VerticalLayout>
                                </content>
                            </Panel>
                        </CustomListItem>
                    </items>
                </Table>

            </ScrollContainer>
        </ScrollContainer>
    </Page>
</mvc:View>